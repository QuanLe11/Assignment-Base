<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=, initial-scale=1.0">
    <title>Casey Manion, Quan Le, and Quest Hollis' Assignment 1 </title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.1/css/bulma.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="style.css" />
</head>

<body>
    <div class="header">
        <h1>Casey Manion, Quan Le, and Quest Hollis' Assignment 1</h1>
    </div>

    <div class="container"> 
        <form id="formElem">
            <label for="input">Enter a Zip Code/City:</label>
            <input type="text" id="input" class="input is-rounded is-small" placeholder="zipcode or city">    
        
            <ul class="dropdown-menu">
                <li class="dropdown-item">
                    <!-- -->
                </li>
            </ul>
        </form>

    </div>

    <script>
        const endpoint = 'https://data.princegeorgescountymd.gov/resource/umjn-t2iz.json';

        const zipcodes = [];

        fetch(endpoint)
            .then(blob => blob.json())
            .then(data => zipcodes.push(...data))

        function findMatches(wordToMatch, zipcodes){
            return zipcodes.filter(place => {
                const regex = new RegExp(wordToMatch,"gi");
            return place.zip.match(regex) || place.city.match(regex)

            });

        }

        function displayMatches(){
            const matchArray = findMatches(this.value, zipcodes);
            const html = matchArray.map(place => {
                const regex = new RegExp(this.value, "gi");
                const cityName = place.city.replace(regex, `<span class="hl">${this.value}</span>`);
                const zipCode = place.zip.replace(regex, `<span class="hl">${this.value}</span>`);
                // add const name, category, address


                return `
                    <li>
                        <div class="suggestions li">
                            <span class="name">${place.name}</span><br/>
                            <span class="name">${place.category}</span><br/>
                            <span class="name">${place.address}</span><br/>
                            <span class="name">${place.city}, ${place.zip}</span><br/>
                        </div>
                    </li>

                    `;


            }).join('');
            suggestions.innerHTML = html;

        }

        const searchInput = document.querySelector('.search');
        const suggestions = document.querySelector('.suggestions');

        searchInput.addEventListener('change', displayMatches);
        searchInput.addEventListener('keyup', displayMatches);
        


    

    </script>



</body>
</html>

